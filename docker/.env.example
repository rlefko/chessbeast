# =============================================================================
# ChessBeast Docker Environment Configuration
# =============================================================================
# Copy this file to .env and customize as needed.
#
# Usage:
#   cp .env.example .env
#   # Edit .env with your settings
#   docker compose up -d
# =============================================================================

# -----------------------------------------------------------------------------
# Stockfish Service (Port 50051) - High-performance Engine Analysis
# -----------------------------------------------------------------------------
# The main Stockfish service for deep position analysis using NNUE evaluation.
# This is the most resource-intensive service.

STOCKFISH_PORT=50051
STOCKFISH_THREADS=8              # CPU threads per engine instance
STOCKFISH_HASH=2048              # Hash table size in MB
STOCKFISH_POOL_SIZE=2            # Number of engine instances in pool

# Resource limits (Docker)
STOCKFISH_CPU_LIMIT=8
STOCKFISH_CPU_RESERVE=4
STOCKFISH_MEMORY_LIMIT=4G
STOCKFISH_MEMORY_RESERVE=2G

# Force rebuild from latest master (set to 1 to force)
FORCE_REBUILD=0

# -----------------------------------------------------------------------------
# Stockfish 16 Service (Port 50053) - Classical Evaluation
# -----------------------------------------------------------------------------
# Stockfish 16 for classical piece evaluation (the 'eval' command was removed
# in later versions). This is a lightweight service.

STOCKFISH16_PORT=50053
STOCKFISH16_THREADS=1            # Single thread (eval doesn't benefit from more)
STOCKFISH16_HASH=128             # Minimal hash (eval doesn't search)
STOCKFISH16_POOL_SIZE=1          # Single instance usually sufficient

# Resource limits (Docker)
STOCKFISH16_CPU_LIMIT=2
STOCKFISH16_CPU_RESERVE=1
STOCKFISH16_MEMORY_LIMIT=512M
STOCKFISH16_MEMORY_RESERVE=256M

# -----------------------------------------------------------------------------
# Maia Service (Port 50052) - Human-likeness Prediction (ML)
# -----------------------------------------------------------------------------
# Maia2 neural network for predicting human-like moves and rating estimation.
# Requires significant memory for PyTorch model.

MAIA_PORT=50052
MAIA_MODEL_TYPE=rapid            # Model type: rapid, blitz, bullet
MAIA_DEVICE=cpu                  # Device: cpu (GPU not supported in Docker yet)

# PyTorch threading (total should not exceed available CPU cores)
MAIA_OMP_THREADS=2
MAIA_MKL_THREADS=2
MAIA_TORCH_THREADS=2

# Resource limits (Docker)
MAIA_CPU_LIMIT=4
MAIA_CPU_RESERVE=2
MAIA_MEMORY_LIMIT=6G
MAIA_MEMORY_RESERVE=4G
